<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JD Evaluation AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <style>
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-family: 'Montserrat', sans-serif;
        }
    </style>
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.13.0",
    "react/": "https://esm.sh/react@^19.1.1/",
    "react": "https://esm.sh/react@^19.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "mammoth": "https://esm.sh/mammoth@1.7.0",
    "xlsx": "https://esm.sh/xlsx@0.18.5"
  }
}
</script>
</head>
  <body class="bg-[#111827] text-gray-300">
    <div id="root">
        <div class="min-h-screen bg-[#111827] flex flex-col">
            <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8">
                <div class="w-full max-w-7xl mx-auto">
                    <!-- Main Tab Navigation -->
                    <div class="flex border-b border-gray-700 mb-8">
                        <button id="main-tab-evaluation" data-view="evaluation" class="main-tab-button px-4 py-3 text-base font-semibold border-b-2 transition-colors duration-200 border-emerald-500 text-emerald-400">ƒê√°nh gi√° gi√° tr·ªã c√¥ng vi·ªác</button>
                        <button id="main-tab-sgrade" data-view="sGrade" class="main-tab-button px-4 py-3 text-base font-semibold border-b-2 transition-colors duration-200 border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500">Tra c·ª©u S-Grade</button>
                    </div>

                    <!-- Evaluation View -->
                    <div id="view-evaluation">
                        <div class="w-full max-w-4xl mx-auto space-y-8">
                            <!-- JdInput Section -->
                            <div class="space-y-8">
                                <div class="text-center">
                                    <h1 class="text-3xl font-extrabold text-gray-100 tracking-tight flex items-center justify-center">
                                        <span role="img" aria-label="clipboard" class="text-4xl mr-3">üìã</span>
                                        ƒê√°nh gi√° m√¥ t·∫£ c√¥ng vi·ªác theo 12 y·∫øu t·ªë PwC
                                    </h1>
                                    <p class="text-gray-400 mt-2 max-w-2xl mx-auto">
                                        H√£y t·∫£i l√™n file m√¥ t·∫£ c√¥ng vi·ªác ƒë·ªÉ ƒë∆∞·ª£c h·ªá th·ªëng ƒë√°nh gi√° t·ª± ƒë·ªông.
                                    </p>
                                </div>
                                <div class="max-w-xl mx-auto space-y-6">
                                    <div>
                                        <label for="job-title-input" class="flex items-center gap-2 text-md font-bold text-gray-300 mb-2">
                                            <span class="text-blue-300 font-mono text-sm bg-blue-900/50 px-2 py-1 rounded">abc</span>
                                            Nh·∫≠p t√™n v·ªã tr√≠ c√¥ng vi·ªác
                                        </label>
                                        <input type="text" id="job-title-input" placeholder="e.g., Deputy Sorting Centers Manager" class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition duration-150 ease-in-out">
                                    </div>
                                    <div>
                                        <label class="flex items-center gap-2 text-md font-bold text-gray-300 mb-2">
                                            <span class="text-emerald-300 font-mono text-sm bg-emerald-900/50 px-2 py-1 rounded">docx</span>
                                            T·∫£i l√™n JD (.docx, .txt)
                                        </label>
                                        <div id="file-drop-zone" class="relative flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-200 border-gray-600 hover:border-gray-500">
                                            <input type="file" id="file-input" accept=".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.txt" class="hidden">
                                            <div id="file-drop-prompt">
                                                <div class="text-center text-gray-400">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                                                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                    </svg>
                                                    <p class="mt-2"><span class="font-semibold text-emerald-400">Click to upload</span> or drag and drop</p>
                                                    <p class="text-xs mt-1">DOCX or TXT (max 200MB)</p>
                                                </div>
                                            </div>
                                            <div id="file-reading-indicator" class="hidden">
                                                <svg class="animate-spin h-8 w-8 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                                <p class="mt-2 text-gray-400">ƒêang ƒë·ªçc file...</p>
                                            </div>
                                            <div id="file-info" class="hidden text-center text-gray-300">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                </svg>
                                                <p id="file-name" class="mt-2 font-semibold"></p>
                                                <p id="file-size" class="text-sm text-gray-500"></p>
                                                <button id="remove-file-button" class="mt-3 text-sm text-red-400 hover:text-red-300 font-semibold">Remove File</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-center">
                                        <button id="evaluate-button" class="flex items-center justify-center w-full sm:w-auto px-8 py-4 bg-emerald-600 text-white font-bold rounded-lg shadow-lg hover:bg-emerald-700 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none transition-all duration-200 transform hover:scale-105 disabled:scale-100 focus:outline-none focus:ring-4 focus:ring-emerald-500/50">
                                            <svg id="evaluate-button-spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                            </svg>
                                            <svg id="evaluate-button-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                            </svg>
                                            <span id="evaluate-button-text">ƒê√°nh gi√° JD</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- EvaluationDisplay Section -->
                            <div id="results-container" class="bg-[#1f2937] p-6 rounded-2xl shadow-lg border border-gray-700 mt-8 min-h-[400px] hidden">
                                <div id="loader-container" class="flex flex-col items-center justify-center h-full text-center hidden">
                                    <svg class="animate-spin h-12 w-12 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    <h3 class="mt-4 text-lg font-semibold text-gray-300">AI is Evaluating...</h3>
                                    <p class="mt-1 text-gray-400">This may take a few moments. Please wait.</p>
                                </div>
                                <div id="error-container" class="flex-col items-center justify-center h-full text-center text-red-400 bg-red-900/50 p-6 rounded-lg hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    <h3 class="text-lg font-bold">Evaluation Failed</h3>
                                    <p id="error-message" class="mt-1 text-sm"></p>
                                </div>
                                <div id="initial-message-container" class="flex flex-col items-center justify-center h-full text-center text-gray-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-600 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-300">Awaiting Evaluation</h3>
                                    <p class="mt-1 max-w-sm text-gray-400">Your AI-powered job description analysis will appear here once you submit a JD for evaluation.</p>
                                </div>
                                <div id="evaluation-content-container" class="flex-col h-full hidden">
                                    <div class="flex space-x-2 border-b border-gray-700 pb-3 mb-4">
                                        <button id="result-tab-evaluation" data-tab="evaluation" class="result-tab-button px-4 py-2 text-sm font-semibold rounded-lg flex items-center space-x-2 transition-colors duration-200 bg-emerald-500 text-white">
                                            <span>Current Evaluation</span>
                                            <span class="px-2 py-0.5 rounded-full text-xs font-bold bg-white text-emerald-600">1</span>
                                        </button>
                                        <button id="result-tab-history" data-tab="history" class="result-tab-button px-4 py-2 text-sm font-semibold rounded-lg flex items-center space-x-2 transition-colors duration-200 text-gray-300 hover:bg-gray-700">
                                            <span>History</span>
                                            <span id="history-count" class="px-2 py-0.5 rounded-full text-xs font-bold bg-gray-600 text-gray-200">0</span>
                                        </button>
                                    </div>
                                    <div class="flex-grow overflow-y-auto pr-2 -mr-4">
                                        <div id="evaluation-result-view"></div>
                                        <div id="history-view" class="hidden space-y-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- S-Grade View -->
                    <div id="view-sgrade" class="hidden">
                        <div class="bg-[#1f2937] p-6 rounded-2xl shadow-lg border border-gray-700 w-full">
                            <div class="flex flex-wrap gap-4 justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-100">Tra c·ª©u S-Grade</h2>
                                <div class="flex items-center space-x-2">
                                    <button id="sgrade-download-template" class="flex items-center space-x-2 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition text-sm" title="T·∫£i file m·∫´u ƒë·ªãnh d·∫°ng XLSX">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.172-5.172a1 1 0 011.414 0L10 14.172l2.414-2.414a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v10a1 1 0 11-2 0V3a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                                        <span>T·∫£i file m·∫´u</span>
                                    </button>
                                    <button id="sgrade-import-button" class="flex items-center space-x-2 px-3 py-2 bg-emerald-600 border border-emerald-500 rounded-lg text-white hover:bg-emerald-700 transition text-sm" title="Nh·∫≠p d·ªØ li·ªáu S-Grade t·ª´ file XLSX">
                                         <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>
                                        <span id="sgrade-import-button-text">Nh·∫≠p S-Grade</span>
                                    </button>
                                    <input type="file" id="sgrade-file-input" accept=".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" class="hidden">
                                    <div class="relative" id="sgrade-filter-container">
                                        <button id="sgrade-filter-toggle" class="flex items-center space-x-2 px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white hover:bg-gray-700 transition" aria-haspopup="true" aria-expanded="false">
                                            <span>L·ªçc hi·ªÉn th·ªã</span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                                        </button>
                                        <div id="sgrade-filter-popup" class="absolute top-full right-0 mt-2 w-72 bg-[#2d3748] border border-gray-600 rounded-lg shadow-xl p-4 z-10 hidden">
                                            <div class="space-y-4">
                                                <div>
                                                    <label for="sgrade-search-term" class="block text-sm font-medium text-gray-300 mb-1">M√£/T√™n v·ªã tr√≠</label>
                                                    <input type="text" id="sgrade-search-term" placeholder="Nh·∫≠p m√£/t√™n v·ªã tr√≠..." class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                                                </div>
                                                <div>
                                                    <label for="sgrade-rank-filter" class="block text-sm font-medium text-gray-300 mb-1">C·∫•p b·∫≠c</label>
                                                    <select id="sgrade-rank-filter" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500">
                                                        <option value="all">T·∫•t c·∫£</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="sgrade-import-success" class="bg-green-900/50 text-green-300 border border-green-700 p-3 rounded-md mb-4 text-sm hidden" role="alert"></div>
                            <div id="sgrade-import-error" class="bg-red-900/50 text-red-300 border border-red-700 p-3 rounded-md mb-4 text-sm hidden" role="alert"></div>

                            <div class="overflow-x-auto rounded-lg border border-gray-700">
                                <table class="min-w-full divide-y divide-gray-700">
                                    <thead class="bg-gray-800/50">
                                        <tr>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">T√™n v·ªã tr√≠</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">T√™n Ti·∫øng Vi·ªát</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">Lo·∫°i v·ªã tr√≠</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-bold text-gray-400 uppercase tracking-wider">C·∫•p b·∫≠c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sgrade-table-body" class="bg-[#1f2937] divide-y divide-gray-700">
                                        <!-- Rows will be injected by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="bg-[#111827] py-6 border-t border-gray-800">
                <div class="container mx-auto text-center text-gray-400 px-4">
                    <p>&copy; 2024 JD Evaluation AI. All Rights Reserved.</p>
                    <p class="text-sm mt-1">A tool for internal job evaluation based on the PwC methodology.</p>
                </div>
            </footer>
        </div>
    </div>
    <script type="module" src="/script.js"></script>
  </body>
</html>
